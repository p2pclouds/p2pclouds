cmake_minimum_required(VERSION 3.6)
project(asio)

add_definitions(-DASIO_STANDALONE -DASIO_SEPARATE_COMPILATION)

macro( add_submodule dir )
    set( options )
    set( oneValueArgs )
    set( multiValueArgs EXHEADERS )
    cmake_parse_arguments( add_submodule "" "" "${multiValueArgs}" ${ARGN} )

    #message( STATUS "{dir} ${dir}" )
    #message( STATUS "{add_submodule_UNPARSED_ARGUMENTS} ${add_submodule_UNPARSED_ARGUMENTS}" )
    foreach( name ${add_submodule_UNPARSED_ARGUMENTS} )
        set( LIBSRC ${LIBSRC} ${dir}/${name} )
    endforeach( name )

    #message( STATUS "{add_submodule_EXHEADERS} ${add_submodule_EXHEADERS}" )
    foreach( name ${add_submodule_EXHEADERS} )
        set( EXHEADERS ${EXHEADERS} ${dir}/${name} )
    endforeach( name )

endmacro( add_submodule )

include_directories(include)
include_directories(include/asio/detail)
include_directories(include/asio/detail/impl)
include_directories(include/asio/generic)
include_directories(include/asio/generic/detail)
include_directories(include/asio/impl)
include_directories(include/asio/ip)
include_directories(include/asio/ip/impl)
include_directories(include/asio/ip/detail)
include_directories(include/asio/local)
include_directories(include/asio/local/detail)
include_directories(include/asio/posix)
# include_directories(include/asio/ssl)
# include_directories(include/asio/ssl/detail)
# include_directories(include/asio/ssl/impl)
include_directories(include/asio/ts)
include_directories(include/asio/windows)
#aux_source_directory(src         src)
#aux_source_directory(include/asio/detail/impl         impl1)
#aux_source_directory(include/asio/generic/detail/impl        impl2)
#aux_source_directory(include/asio/impl        impl3)
#aux_source_directory(include/asio/ip/impl        impl4)
#aux_source_directory(include/asio/ip/detail/impl        impl5)
#aux_source_directory(include/asio/local/detail/impl       impl6)
# aux_source_directory(include/asio/ssl/detail/impl       impl7)
# aux_source_directory(include/asio/ssl/impl       impl8)
# set(LIBSRC ${src} ${impl1} ${impl2} ${impl3} ${impl4} ${impl5} ${impl6} ${impl7} ${impl8})
set(LIBSRC ${src} ${impl1} ${impl2} ${impl3} ${impl4} ${impl5} ${impl6} )
add_submodule (src asio.cpp)

add_library(asio STATIC ${LIBSRC})
set_target_properties(asio PROPERTIES FOLDER deps)